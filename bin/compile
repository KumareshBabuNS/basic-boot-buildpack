#!/usr/bin/env bash

set -e

build_dir=$1

cd ${build_dir}
ls -la

jre_dir=${build_dir}/jre
mkdir -p ${jre_dir}
cd ${jre_dir}

echo "Downloading jre..."
### NOTE: make sure to update to latest jre to help ensure that CVEs have been addressed!
# oracle jdk8
#JRE_ARCHIVE=jre-8u111-linux-x64.tar.gz
#wget --no-check-certificate --no-cookies --header "Cookie: oraclelicense=accept-securebackup-cookie" http://download.oracle.com/otn-pub/java/jdk/8u111-b14/${JRE_ARCHIVE}

# openJDK from java-buildpack caches (https://java-buildpack.cloudfoundry.org/openjdk/trusty/x86_64/index.yml)
JRE_ARCHIVE=openjdk-1.8.0_91.tar.gz
wget -q https://java-buildpack.cloudfoundry.org/openjdk/trusty/x86_64/${JRE_ARCHIVE}

echo "Extracting jre..."
tar -xzf ${JRE_ARCHIVE}

cd ${build_dir}
ls -la

cat .profile